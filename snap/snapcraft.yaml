---
name: nightmayr-kf5-qt-5-15-2-core20
version: 5.85.0
base: core20
summary: Shared Qt 5.15 and KF5
description: |
 This snap contains the necessary libraries required by
 Qt Applications.
confinement: strict
grade: stable
slots:
    nightmayr-qt-5-15-2-core20-slot:
        content: nightmayr-qt-5-15-2-core20-all
        interface: content
        read:
        - "."
    nightmayr-kf-5-85-qt-5-15-core20:
        content: nightmayr-kf-5-85-qt-5-15-core20
        interface: content
        read:
        - "."
architectures:
  - build-on: amd64
  - build-on: arm64
  - build-on: armhf
#   - build-on: ppc64el
parts:
    patches:
        plugin: dump
        source: snap/local/patches
        source-type: local
        prime:
        - -*
    mesa:
        after: []
        plugin: nil
        build-attributes:
        - no-patchelf
        build-packages: []
        stage-packages:
        - libgl1-mesa-dri
        - libglx-mesa0
        prime:
        - "-lib/udev"
        - "-usr/doc"
        - "-usr/doc-base"
        - "-usr/share/applications"
        - "-usr/share/apport"
        - "-usr/share/bug"
        - "-usr/share/doc"
        - "-usr/share/doc-base"
        - "-usr/share/icons"
        - "-usr/share/libdrm"
        - "-usr/share/libwacom"
        - "-usr/share/lintian"
        - "-usr/share/man"
        - "-usr/share/pkgconfig"
    qtbase:
        plugin: nil
        override-pull: |
            git clone -b v5.15.2 --depth=1 git://code.qt.io/qt/qt5.git .
            perl init-repository --module-subset=qtbase
            git submodule update qtbase

            cd qtbase
            git apply $SNAPCRAFT_STAGE/qtbase_5_15_2/01-fix-qtopenurl-openfile-portal.patch
            # Check launchpad environment
            echo $HOME
            ls ~
            ls $HOME
            env
        override-build: |
            ./configure \
                -prefix /usr \
                -bindir /usr/lib/qt5/bin \
                -libdir /usr/lib/$SNAPCRAFT_ARCH_TRIPLET \
                -docdir /usr/share/qt5/doc \
                -headerdir /usr/include/$SNAPCRAFT_ARCH_TRIPLET/qt5 \
                -datadir /usr/share/qt5 \
                -archdatadir /usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5 \
                -plugindir /usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/plugins \
                -importdir /usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/imports \
                -translationdir /usr/share/qt5/translations \
                -hostdatadir /usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5 \
                -sysconfdir /etc/xdg \
                -examplesdir /usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples \
                -release \
                -opensource \
                -confirm-license \
                -nomake examples \
                -nomake tests \
                -I $SNAPCRAFT_STAGE/usr/include \
                -L $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET

            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL" install
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtbase/build/*
            rm -rf /root/parts/qtbase/src/*
            rm -rf /root/parts/qtbase/build/.git
            rm -rf /root/parts/qtbase/src/.git
        build-packages:
        - build-essential
        - autotools-dev
        - binutils-gold
        - bison
        - cdbs
        - cmake
        - flex
        - flite1-dev
        - freetds-dev
        - git
        - gnome-keyring
        - gperf
        - libasound2-dev
        - libatspi2.0-dev
        - libaudio-dev
        - libavcodec-dev
        - libavformat-dev
        - libavutil-dev
        - libbluetooth-dev
        - libc6
        - libcap-dev
        - libclang-6.0-dev
        - libcups2-dev
        - libdbus-1-3
        - libdbus-1-dev
        - libedit-dev
        - libegl1-mesa-dev
        - libevent-dev
        - libflac++-dev
        - libfontconfig1-dev
        - libfreetype6-dev
        - libgcc1
        - libgconf2-dev
        - libgcrypt20-dev
        - libgeoclue-2-dev
        - libgl1-mesa-dev
        # - libgl1-mesa-dev|libgl-dev
        - libglib2.0-0
        - libglib2.0-dev
        # - libglu1-mesa-dev|libglu-dev
        - libglu1-mesa-dev
        - libgstreamer1.0-dev
        - libgstreamer-plugins-base1.0-dev
        - libgtk2.0-dev
        - libgtk-3-dev
        - libharfbuzz-dev
        - libhunspell-dev
        - libice-dev
        - libicu-dev
        - libjpeg-dev
        - libjsoncpp-dev
        - libmng-dev
        - libmtdev-dev
        - libmysqlclient-dev
        - libnss3-dev
        - libopenal-dev
        - libopus-dev
        - libpci-dev
        - libpng-dev
        - libpq-dev
        - libproxy-dev
        - libpulse-dev
        - libsdl2-dev
        - libsm-dev
        - libsnappy-dev
        - libsocketcan-dev
        - libspeex-dev
        - libsqlite3-0
        - libsqlite3-dev
        - libsrtp2-dev
        - libssl-dev
        - libstdc++6
        - libtiff5-dev
        - libudev-dev
        - libvpx-dev
        - libvulkan-dev
        - libwayland-dev
        # - libwayland-egl1-mesa|libwayland-egl1
        - libwayland-egl1-mesa
        - libwebp-dev
        - libx11-dev
        - libx11-xcb1
        - libx11-xcb-dev
        - libxcb1
        - libxcb1-dev
        - libxcb-dri3-dev
        - libxcb-glx0-dev
        - libxcb-icccm4
        - libxcb-icccm4-dev
        - libxcb-image0
        - libxcb-image0-dev
        - libxcb-keysyms1
        - libxcb-keysyms1-dev
        - libxcb-randr0-dev
        - libxcb-render0-dev
        - libxcb-render-util0-dev
        - libxcb-shape0-dev
        - libxcb-shm0-dev
        - libxcb-sync0-dev
        - libxcb-sync-dev
        - libxcb-util-dev
        - libxcb-xfixes0-dev
        - libxcb-xinerama0-dev
        - libxcb-xinput-dev
        - libxcomposite-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxkbcommon-dev
        - libxkbcommon-x11-dev
        - libxkbfile-dev
        - libxml2
        - libxml2-dev
        - libxmu-dev
        - libxrandr-dev
        - libxrender-dev
        - libxslt1-dev
        - libxss-dev
        - libxt-dev
        - libxtst-dev
        - libxv-dev
        - llvm-6.0
        - mesa-common-dev
        - ninja-build
        - pkg-config
        - python2
        - python3
        - quilt
        - re2c
        - ruby
        - unixodbc-dev
        - zlib1g-dev
        stage-packages:
        - libdbus-1-3
        - libegl1
        - libfontconfig1
        - libfreetype6
        - libgl1
        - libglib2.0-0
        - libgtk-3-0
        - libharfbuzz0b
        - libicu66
        - libpcre2-16-0
        - libpng16-16
        - libssl1.1
        - libwayland-client0
        - libwayland-cursor0
        - libwayland-egl1
        - libx11-6
        - libx11-xcb1
        - libxcb1
        - libxcb-glx0
        - libxcb-icccm4
        - libxcb-image0
        - libxcb-keysyms1
        - libxcb-randr0
        - libxcb-render0
        - libxcb-render-util0
        - libxcb-shape0
        - libxcb-shm0
        - libxcb-sync1
        - libxcb-util1
        - libxcb-xfixes0
        - libxcb-xinerama0
        - libxcb-xinput0
        - libxcb-xkb1
        - libxcursor1
        - libxkbcommon0
        - libxkbcommon-x11-0
        - zlib1g
        - libasound2
        - libevent-2.1-7
        - libice6
        - libjpeg-turbo8
        - libminizip1
        - libnspr4
        - libnss3
        - libopus0
        - libre2-5
        - libsm6
        - libsnappy1v5
        - libvpx6
        - libxss1
        - libasn1-8-heimdal
        - libgssapi3-heimdal
        - libhcrypto4-heimdal
        - libheimbase1-heimdal
        - libheimntlm0-heimdal
        - libhx509-5-heimdal
        - libkrb5-26-heimdal
        - libldap-2.4-2
        - libltdl7
        - libmtdev1
        - libmysqlclient21
        - libodbc1
        - libpq5
        - libroken18-heimdal
        - libsasl2-2
        - libsybdb5
        - libwind0-heimdal
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - patches
        - sources
    qtxmlpatterns:
        plugin: nil
        source: git://code.qt.io/qt/qtxmlpatterns.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtxmlpatterns/build/*
            rm -rf /root/parts/qtxmlpatterns/src/*
            rm -rf /root/parts/qtxmlpatterns/build/.git
            rm -rf /root/parts/qtxmlpatterns/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtbase   
    qtx11extras:
        plugin: nil
        source: /root/parts/sources/src/qtx11extras
        source-type: local
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtx11extras/build/*
            rm -rf /root/parts/qtx11extras/src/*
            rm -rf /root/parts/qtx11extras/build/.git
            rm -rf /root/parts/qtx11extras/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtbase       
    qtgamepad:
        plugin: nil
        source: git://code.qt.io/qt/qtgamepad.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtgamepad/build/*
            rm -rf /root/parts/qtgamepad/src/*
            rm -rf /root/parts/qtgamepad/build/.git
            rm -rf /root/parts/qtgamepad/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages:
        - libsdl2-2.0-0
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtbase
    qtimageformats:
        plugin: nil
        source: git://code.qt.io/qt/qtimageformats.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtimageformats/build/*
            rm -rf /root/parts/qtimageformats/src/*
            rm -rf /root/parts/qtimageformats/build/.git
            rm -rf /root/parts/qtimageformats/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages:
        - libmng2
        - libwebpdemux2
        - libwebpmux3
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtbase
    qtnetworkauth:
        plugin: nil
        source: git://code.qt.io/qt/qtnetworkauth.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtnetworkauth/build/*
            rm -rf /root/parts/qtnetworkauth/src/*
            rm -rf /root/parts/qtnetworkauth/build/.git
            rm -rf /root/parts/qtnetworkauth/src/.git 
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtbase
    qtserialport:
        plugin: nil
        source: git://code.qt.io/qt/qtserialport.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtserialport/build/*
            rm -rf /root/parts/qtserialport/src/*   
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtbase
    qtremoteobjects:
        plugin: nil
        source: git://code.qt.io/qt/qtremoteobjects.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtremoteobjects/build/*
            rm -rf /root/parts/qtremoteobjects/src/*
            rm -rf /root/parts/qtremoteobjects/build/.git
            rm -rf /root/parts/qtremoteobjects/src/.git  
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtbase
    qtsvg:
        plugin: nil
        source: git://code.qt.io/qt/qtsvg.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtsvg/build/*
            rm -rf /root/parts/qtsvg/src/*
            rm -rf /root/parts/qtsvg/build/.git
            rm -rf /root/parts/qtsvg/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtbase
    qtscript:
        plugin: nil
        source: git://code.qt.io/qt/qtscript.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtscript/build/*
            rm -rf /root/parts/qtscript/src/*
            rm -rf /root/parts/qtscript/build/.git
            rm -rf /root/parts/qtscript/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtbase
    qtdeclarative:
        plugin: nil
        source: git://code.qt.io/qt/qtdeclarative.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtdeclarative/build/*
            rm -rf /root/parts/qtdeclarative/src/*
            rm -rf /root/parts/qtdeclarative/build/.git
            rm -rf /root/parts/qtdeclarative/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtxmlpatterns
    qtwayland:
        plugin: nil
        source: git://code.qt.io/qt/qtwayland.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtwayland/build/*
            rm -rf /root/parts/qtwayland/src/*
            rm -rf /root/parts/qtwayland/build/.git
            rm -rf /root/parts/qtwayland/src/.git 
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qttools:
        plugin: nil
        source: git://code.qt.io/qt/qttools.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qttools/build/*
            rm -rf /root/parts/qttools/src/*
            rm -rf /root/parts/qttools/build/.git
            rm -rf /root/parts/qttools/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtconnectivity:
        plugin: nil
        source: git://code.qt.io/qt/qtconnectivity.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtconnectivity/build/*
            rm -rf /root/parts/qtconnectivity/src/*
            rm -rf /root/parts/qtconnectivity/build/.git
            rm -rf /root/parts/qtconnectivity/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtcharts:
        plugin: nil
        source: git://code.qt.io/qt/qtcharts.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtcharts/build/*
            rm -rf /root/parts/qtcharts/src/*
            rm -rf /root/parts/qtcharts/build/.git
            rm -rf /root/parts/qtcharts/src/.git   
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtdoc:
        plugin: nil
        source: git://code.qt.io/qt/qtdoc.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        - QT_INSTALL_DOCS: $SNAPCRAFT_PART_INSTALL/usr/share/qt5/doc
        override-build: |
            # $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -query
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT docs
            # make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            # cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            # rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtdoc/build/*
            rm -rf /root/parts/qtdoc/src/*
            rm -rf /root/parts/qtdoc/build/.git
            rm -rf /root/parts/qtdoc/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtlottie:
        plugin: nil
        source: git://code.qt.io/qt/qtlottie.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtlottie/build/*
            rm -rf /root/parts/qtlottie/src/*
            rm -rf /root/parts/qtlottie/build/.git
            rm -rf /root/parts/qtlottie/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtgraphicaleffects:
        plugin: nil
        source: git://code.qt.io/qt/qtgraphicaleffects.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtgraphicaleffects/build/*
            rm -rf /root/parts/qtgraphicaleffects/src/*
            rm -rf /root/parts/qtgraphicaleffects/build/.git
            rm -rf /root/parts/qtgraphicaleffects/src/.git    
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtmultimedia:
        plugin: nil
        source: git://code.qt.io/qt/qtmultimedia.git
        source-tag: v5.15.2 
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtmultimedia/build/*
            rm -rf /root/parts/qtmultimedia/src/*
            rm -rf /root/parts/qtmultimedia/build/.git
            rm -rf /root/parts/qtmultimedia/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages:
        - libasyncns0
        - libflac8
        - libgstreamer-gl1.0-0
        - libgstreamer-plugins-base1.0-0
        - libgstreamer1.0-0
        - libgudev-1.0-0
        - libogg0
        - libopenal1
        - liborc-0.4-0
        - libpulse0
        - libsndfile1
        - libsndio7.0
        - libvorbis0a
        - libvorbisenc2
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtquick3d:
        plugin: nil
        source: git://code.qt.io/qt/qtquick3d.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtquick3d/build/*
            rm -rf /root/parts/qtquick3d/src/*
            rm -rf /root/parts/qtquick3d/build/.git
            rm -rf /root/parts/qtquick3d/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtquickcontrols:
        plugin: nil
        source: git://code.qt.io/qt/qtquickcontrols.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtquickcontrols/build/*
            rm -rf /root/parts/qtquickcontrols/src/*
            rm -rf /root/parts/qtquickkcontols/build/.git
            rm -rf /root/parts/qtquickkcontols/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtscxml:
        plugin: nil
        source: git://code.qt.io/qt/qtscxml.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtscxml/build/*
            rm -rf /root/parts/qtscxml/src/*
            rm -rf /root/parts/qtscxml/build/.git
            rm -rf /root/parts/qtscxml/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtquicktimeline:
        plugin: nil
        source: git://code.qt.io/qt/qtquicktimeline.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtquicktimeline/build/*
            rm -rf /root/parts/qtquicktimeline/src/*
            rm -rf /root/parts/qtquicktimeline/build/.git
            rm -rf /root/parts/qtquicktimeline/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtsensors:
        plugin: nil
        source: git://code.qt.io/qt/qtsensors.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtsensors/build/*
            rm -rf /root/parts/qtsensors/src/*
            rm -rf /root/parts/qtsensors/build/.git
            rm -rf /root/parts/qtsensors/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtwebchannel:
        plugin: nil
        source: git://code.qt.io/qt/qtwebchannel.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtwebchannel/build/*
            rm -rf /root/parts/qtwebchannel/src/*
            rm -rf /root/parts/qtwebchannel/build/.git
            rm -rf /root/parts/qtwebchannel/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qtwebsockets:
        plugin: nil
        source: /root/parts/sources/src/qtwebsockets
        source-type: local
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtwebsockets/build/*
            rm -rf /root/parts/qtwebsockets/src/*
            rm -rf /root/parts/qtwebsockets/build/.git
            rm -rf /root/parts/qtwebsockets/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
    qt3d:
        plugin: nil
        source: git://code.qt.io/qt/qt3d.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qt3d/build/*
            rm -rf /root/parts/qt3d/src/*
            rm -rf /root/parts/qt3d/build/.git
            rm -rf /root/parts/qt3d/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
        - qtimageformats
    qtquickcontrols2:
        plugin: nil
        source: git://code.qt.io/qt/qtquickcontrols2.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtquickconrols2/build/*
            rm -rf /root/parts/qtquickconrols2/src/*
            rm -rf /root/parts/qtquickconrols2/build/.git
            rm -rf /root/parts/qtquickconrols2/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtdeclarative
        - qtquickcontrols
    qtlocation:
        plugin: nil
        source: git://code.qt.io/qt/qtlocation.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtlocation/build/*
            rm -rf /root/parts/qtlocation/src/*
            rm -rf /root/parts/qtlocation/build/.git
            rm -rf /root/parts/qtlocation/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtquickcontrols
        - qtserialport
    qtdatavis3d:
        plugin: nil
        source: git://code.qt.io/qt/qtdatavis3d.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtdatavis3d/build/*
            rm -rf /root/parts/qtdatavis3d/src/*
            rm -rf /root/parts/qtdatavis3d/build/.git
            rm -rf /root/parts/qtdatavis3d/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtmultimedia
    qtspeech:
        plugin: nil
        source: git://code.qt.io/qt/qtspeech.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtspeech/build/*
            rm -rf /root/parts/qtspeech/src/*
            rm -rf /root/parts/qtspeech/build/.git
            rm -rf /root/parts/qtspeech/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages:
        - libflite1
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtmultimedia
    qtserialbus:
        plugin: nil
        source: git://code.qt.io/qt/qtserialbus.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtserialbus/build/*
            rm -rf /root/parts/qtserialbus/src/*
            rm -rf /root/parts/qtserialbus/build/.git
            rm -rf /root/parts/qtserialbus/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtserialport
    qttranslations:
        plugin: nil
        source: git://code.qt.io/qt/qttranslations.git
        source-tag: v5.15.2
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qttranslations/build/*
            rm -rf /root/parts/qttranslations/src/*
            rm -rf /root/parts/qttranslations/build/.git
            rm -rf /root/parts/qttranslations/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qttools
    qtwebglplugin:
        plugin: nil
        source: /root/parts/sources/src/qtwebglplugin
        source-type: local
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$SNAPCRAFT_PARALLEL_BUILD_COUNT
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtwebglplugin/build/*
            rm -rf /root/parts/qtwebglplugin/src/*
            rm -rf /root/parts/qtwebglplugin/build/.git
            rm -rf /root/parts/qtwebglplugin/src/.git
        build-packages:
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages: []
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtwebsockets
    qtwebengine:
        plugin: nil
        source: /root/parts/sources/src/qtwebengine
        source-type: local
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            # Setting number of build jobs to a safe number to prevent running out of memory during QtWebengine build
            memtotal=$(cat /proc/meminfo | awk '{print $2}' | head -n1)
            roundedmem=$(python3 -c "print(round($memtotal/1024000.0))")
            maxcoresformem=$(python3 -c "print(max(1, int(($roundedmem / 2)-1)))")
            numcoreslow=$(python3 -c "print(min($maxcoresformem, $SNAPCRAFT_PARALLEL_BUILD_COUNT))")
            $SNAPCRAFT_STAGE/usr/lib/qt5/bin/qmake -qtconf "$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/qt.conf"
            make -j$numcoreslow NINJAJOBS=-j$numcoreslow
            make INSTALL_ROOT="$SNAPCRAFT_PART_INSTALL/tmp" install
            cp -a "$SNAPCRAFT_PART_INSTALL/tmp$SNAPCRAFT_STAGE/." "$SNAPCRAFT_PART_INSTALL"
            rm -r "$SNAPCRAFT_PART_INSTALL/tmp"
        override-stage: |
            snapcraftctl stage
            # Cleanup space on build VM to prevent running out of disk space for later parts
            rm -rf /root/parts/qtwebengine/build/*
            rm -rf /root/parts/qtwebengine/src/*
            rm -rf /root/parts/qtwebengine/build/.git
            rm -rf /root/parts/qtwebengine/src/.git
            rm -rf /root/parts/sources/build/qtwebengine/*
            rm -rf /root/parts/sources/src/qtwebengine/*
            rm -rf /root/parts/sources/build/qtwebengine/.git
            rm -rf /root/parts/sources/src/qtwebengine/.git
        build-packages:
        - python3
        - flex
        - libxcb-render0-dev
        - libxcb-image0-dev
        - libxcb-shape0-dev
        - libxcb-sync-dev
        - libxcb-render-util0-dev
        - libxcb1-dev
        - libxcb-xfixes0-dev
        - libxcb-icccm4-dev
        - libxcb-keysyms1-dev
        - libxcb-shm0-dev
        - libxrender-dev
        - libpulse-dev
        - libasound2-dev
        - libaudio-dev
        - libcups2-dev
        - libdbus-1-dev
        - libfreetype6-dev
        - libgl1-mesa-dev
        - libglib2.0-dev
        - libegl1-mesa-dev
        - libglu1-mesa-dev
        - libice-dev
        - libjpeg-dev
        - libmng-dev
        - libpng-dev
        - libsm-dev
        - libsqlite3-dev
        - libssl-dev
        - libtiff5-dev
        - libx11-dev
        - libxcursor-dev
        - libxext-dev
        - libxft-dev
        - libxi-dev
        - libxinerama-dev
        - libxmu-dev
        - libxrandr-dev
        - libxt-dev
        - libxv-dev
        - zlib1g-dev
        - libedit-dev
        - libwayland-dev
        - libwayland-egl1-mesa
        - libmtdev-dev
        - libudev-dev
        - libxkbcommon-dev
        - libxcomposite-dev
        - libvulkan-dev
        stage-packages:
        - libwebpdemux2
        - libwebpmux3
        - libxslt1.1
        prime:
        - -./usr/include
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
        - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
        - -./usr/lib/qt5
        after:
        - qtlocation
        - qtwebchannel
        - qtquickcontrols2
        - qtsvg
    #       
    #     Qtwebkit fails with error:  
    # 
    #     error: redefinition of ‘class QWebChannelWebKitTransport’
    #    48 | class QWebChannelWebKitTransport : public QWebChannelAbstractTransport {
    #       |       ^~~~~~~~~~~~~~~~~~~~~~~~~~
    #    
    # qtwebkit:
    #     plugin: cmake
    #     source: git://code.qt.io/qt/qtwebkit.git
    #     # source-tag: v5.212.0-alpha4
    #     source-branch: "5.212"
    #     cmake-parameters: 
    #     - -DCMAKE_BUILD_TYPE=Release
    #     - -DCMAKE_INSTALL_PREFIX=/usr
    #     - -DPORT=Qt
    #     build-environment:
    #     - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
    #     - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
    #     override-stage: |
    #         snapcraftctl stage
    #         # Cleanup space on build VM to prevent running out of disk space for later parts
    #         rm -rf /root/parts/qtwebkit/build/*
    #         rm -rf /root/parts/qtwebkit/src/*
    #         rm -rf /root/parts/qtwebkit/build/.git
    #         rm -rf /root/parts/qtwebkit/src/.git
    #     build-packages:
    #     - flex
    #     - libxcb-render0-dev
    #     - libxcb-image0-dev
    #     - libxcb-shape0-dev
    #     - libxcb-sync-dev
    #     - libxcb-render-util0-dev
    #     - libxcb1-dev
    #     - libxcb-xfixes0-dev
    #     - libxcb-icccm4-dev
    #     - libxcb-keysyms1-dev
    #     - libxcb-shm0-dev
    #     - libxrender-dev
    #     - libpulse-dev
    #     - libasound2-dev
    #     - libaudio-dev
    #     - libcups2-dev
    #     - libdbus-1-dev
    #     - libfreetype6-dev
    #     - libgl1-mesa-dev
    #     - libglib2.0-dev
    #     - libegl1-mesa-dev
    #     - libglu1-mesa-dev
    #     - libice-dev
    #     - libjpeg-dev
    #     - libmng-dev
    #     - libpng-dev
    #     - libsm-dev
    #     - libsqlite3-dev
    #     - libssl-dev
    #     - libtiff5-dev
    #     - libx11-dev
    #     - libxcursor-dev
    #     - libxext-dev
    #     - libxft-dev
    #     - libxi-dev
    #     - libxinerama-dev
    #     - libxmu-dev
    #     - libxrandr-dev
    #     - libxt-dev
    #     - libxv-dev
    #     - zlib1g-dev
    #     - libedit-dev
    #     - libwayland-dev
    #     - libwayland-egl1-mesa
    #     - libmtdev-dev
    #     - libudev-dev
    #     - libxkbcommon-dev
    #     - libxcomposite-dev
    #     - libvulkan-dev
    #     - python2
    #     - libhyphen-dev
    #     # - python3
    #     stage-packages: []
    #     prime:
    #     - -./usr/include
    #     - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/cmake
    #     - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/pkgconfig
    #     - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/bin
    #     - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/mkspecs
    #     - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/qt5/examples
    #     - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.la
    #     - -./usr/lib/$SNAPCRAFT_ARCH_TRIPLET/*.prl
    #     - -./usr/lib/qt5
    #     after:
    #     - qtwebengine

    extra-cmake-modules:
        source: /root/parts/sources/src/extra-cmake-modules
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - qtbase
        - qtxmlpatterns
        - qtx11extras
        - qtgamepad
        - qtimageformats
        - qtnetworkauth
        - qtserialport
        - qtremoteobjects
        - qtsvg
        - qtscript
        - qtdeclarative
        - qtwayland
        - qttools
        - qtconnectivity
        - qtcharts
        - qtdoc
        - qtlottie
        - qtgraphicaleffects
        - qtmultimedia
        - qtquick3d
        - qtquickcontrols
        - qtscxml
        - qtquicktimeline
        - qtsensors
        - qtwebchannel
        - qtwebsockets
        - qt3d
        - qtquickcontrols2
        - qtlocation
        - qtdatavis3d
        - qtspeech
        - qtserialbus
        - qttranslations
        - qtwebglplugin
        - qtwebengine
    kcoreaddons:
        source: /root/parts/sources/src/kcoreaddons
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - extra-cmake-modules
    ki18n:
        source: /root/parts/sources/src/ki18n
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kcoreaddons
    karchive:
        source: /root/parts/sources/src/karchive
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - ki18n
    kconfig:
        source: /root/parts/sources/src/kconfig
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - karchive
    kdoctools:
        source: /root/parts/sources/src/kdoctools
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        build-packages:
        - docbook-xml
        - docbook-xsl
        after:
        - kconfig
    kwidgetsaddons:
        source: /root/parts/sources/src/kwidgetsaddons
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kdoctools
    kcodecs:
        source: /root/parts/sources/src/kcodecs
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kwidgetsaddons
    kwindowsystem:
        source: /root/parts/sources/src/kwindowsystem
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        build-packages:
        - libxcb-res0-dev
        stage-packages:
        - libxcb-res0
        after:
        - kcodecs
    polkit-qt-1:
        source: /root/parts/sources/src/polkit-qt-1
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        build-packages:
        - libpolkit-gobject-1-dev
        - libpolkit-agent-1-dev
        stage-packages:
        - libpolkit-agent-1-0
        - libpolkit-gobject-1-0
        after:
        - kwindowsystem
    kauth:
        source: /root/parts/sources/src/kauth
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - polkit-qt-1
    kcrash:
        source: /root/parts/sources/src/kcrash
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kauth
    kdbusaddons:
        source: /root/parts/sources/src/kdbusaddons
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kcrash
    kguiaddons:
        source: /root/parts/sources/src/kguiaddons
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kdbusaddons
    kconfigwidgets:
        source: /root/parts/sources/src/kconfigwidgets
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kguiaddons
    kitemviews:
        source: /root/parts/sources/src/kitemviews
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kconfigwidgets
    kiconthemes:
        source: /root/parts/sources/src/kiconthemes
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kitemviews
    kcompletion:
        source: /root/parts/sources/src/kcompletion
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kiconthemes
    kservice:
        source: /root/parts/sources/src/kservice
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kcompletion
    sonnet:
        source: /root/parts/sources/src/sonnet
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        stage-packages:
        - libhunspell-1.7-0
        after:
        - kservice
    attica:
        source: /root/parts/sources/src/attica
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - sonnet
    phonon:
        source: /root/parts/sources/src/phonon
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        stage-packages:
        - libpulse-mainloop-glib0
        after:
        - attica
    breeze-icons:
        source: /root/parts/sources/src/breeze-icons
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - phonon
    kglobalaccel:
        source: /root/parts/sources/src/kglobalaccel
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - breeze-icons
    ktextwidgets:
        source: /root/parts/sources/src/ktextwidgets
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kglobalaccel
    knotifications:
        source: /root/parts/sources/src/knotifications
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        stage-packages:
        - libxtst6
        after:
        - ktextwidgets
    kxmlgui:
        source: /root/parts/sources/src/kxmlgui
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - knotifications
    kbookmarks:
        source: /root/parts/sources/src/kbookmarks
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kxmlgui
    kjobwidgets:
        source: /root/parts/sources/src/kjobwidgets
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kbookmarks
    kwallet:
        source: /root/parts/sources/src/kwallet
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kjobwidgets
    solid:
        source: /root/parts/sources/src/solid
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kwallet
    kio:
        source: /root/parts/sources/src/kio
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - solid
    kparts:
        source: /root/parts/sources/src/kparts
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
            # Copy kservicetypes5/kpart.desktop to /root/.local/share to be parseable by ktexteditor cmake build stage
            mkdir -p $HOME/.local/share && cp -a $SNAPCRAFT_PART_INSTALL/usr/share/kservicetypes5 $HOME/.local/share
        after:
        - kio
    taglib:
        source: /root/parts/sources/src/taglib
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        - -DBUILD_SHARED_LIBS=TRUE
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kparts
    kirigami:
        source: /root/parts/sources/src/kirigami
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - taglib
    kpackage:
        source: /root/parts/sources/src/kpackage
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kirigami
    kinit:
        source: /root/parts/sources/src/kinit
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kpackage
    kactivities:
        source: /root/parts/sources/src/kactivities
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        build-packages:
        - libboost-dev
        after:
        - kinit
    plasma-wayland-protocols:
        source: /root/parts/sources/src/plasma-wayland-protocols
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kactivities
    kdeclarative:
        source: /root/parts/sources/src/kdeclarative
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - plasma-wayland-protocols
    kidletime:
        source: /root/parts/sources/src/kidletime
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kdeclarative
    kunitconversion:
        source: /root/parts/sources/src/kunitconversion
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kidletime
    oxygen-icons5:
        source: /root/parts/sources/src/oxygen-icons5
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kunitconversion
    syntax-highlighting:
        source: /root/parts/sources/src/syntax-highlighting
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - oxygen-icons5
    kdnssd:
        source: /root/parts/sources/src/kdnssd
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - syntax-highlighting
    kitemmodels:
        source: /root/parts/sources/src/kitemmodels
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kdnssd
    kross:
        source: /root/parts/sources/src/kross
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kitemmodels
    kjs:
        source: /root/parts/sources/src/kjs
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kross
    ktexteditor:
        source: /root/parts/sources/src/ktexteditor
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G 'Ninja' -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        override-stage: |
            snapcraftctl stage
            # ktexteditor build installs usr/share/polkit-1/actions/org.kde.ktexteditor.katetextbuffer.policy to kauth PART_INSTALL directory
            # this cause priming kauth to fail due to a mismatch between STAGE and PART_INSTALL, hence copying the polkit directory to STAGE to resolve
            cp -a /root/parts/kauth/install/usr/share/polkit-1 $SNAPCRAFT_STAGE/usr/share
        after:
        - kjs
    kwayland:
        source: /root/parts/sources/src/kwayland
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - ktexteditor
    syndication:
        source: /root/parts/sources/src/syndication
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kwayland
    threadweaver:
        source: /root/parts/sources/src/threadweaver
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - syndication
    kded:
        source: /root/parts/sources/src/kded
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
            # Copy kservicetypes5/kdedmodule.desktop to /root/.local/share to be parseable by kdelibs4support cmake build stage
            cp -a $SNAPCRAFT_PART_INSTALL/usr/share/kservicetypes5 $HOME/.local/share
        after:
        - threadweaver
    kdesignerplugin:
        source: /root/parts/sources/src/kdesignerplugin
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kded
    kemoticons:
        source: /root/parts/sources/src/kemoticons
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kdesignerplugin
    kfilemetadata:
        source: /root/parts/sources/src/kfilemetadata
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        build-packages:
        - xattr
        - libattr1-dev
        stage-packages:
        - libaom0
        - libavcodec58
        - libavformat58
        - libavutil56
        - libbluray2
        - libchromaprint1
        - libcodec2-0.9
        - libgme0
        - libgomp1
        - libgsm1
        - libmp3lame0
        - libmpg123-0
        - libnuma1
        - libopenjp2-7
        - libopenmpt0
        - libshine3
        - libsoxr0
        - libspeex1
        - libssh-gcrypt-4
        - libswresample3
        - libtheora0
        - libtwolame0
        - libva-drm2
        - libva-x11-2
        - libva2
        - libvdpau1
        - libvorbisfile3
        - libwavpack1
        - libx264-155
        - libx265-179
        - libxvidcore4
        - libzvbi0
        - ocl-icd-libopencl1
        after:
        - kemoticons
    knewstuff:
        source: /root/parts/sources/src/knewstuff
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        override-build: |
            cmake $SNAPCRAFT_PART_SRC -G Ninja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$SNAPCRAFT_PART_INSTALL/usr
            cmake --build . -- -j${SNAPCRAFT_PARALLEL_BUILD_COUNT}
            cmake --build . --target install
        after:
        - kfilemetadata
    kpty:
        source: /root/parts/sources/src/kpty
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - knewstuff
    plasma-framework:
        source: /root/parts/sources/src/plasma-framework
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        stage-packages:
        - libopengl0
        after:
        - kpty
    baloo:
        source: /root/parts/sources/src/baloo
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        build-packages:
        - liblmdb-dev
        stage-packages:
        - liblmdb0
        after:
        - plasma-framework
    bluez-qt:
        source: /root/parts/sources/src/bluez-qt
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - baloo
    frameworkintegration:
        source: /root/parts/sources/src/frameworkintegration
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - bluez-qt
    kactivities-stats:
        source: /root/parts/sources/src/kactivities-stats
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - frameworkintegration
    kapidox:
        source: /root/parts/sources/src/kapidox
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        build-packages:
        - python3-setuptools
        after:
        - kactivities-stats
    kcalendarcore:
        source: /root/parts/sources/src/kcalendarcore
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        build-packages:
        - libical-dev
        stage-packages:
        - libical3
        after:
        - kapidox
    kcmutils:
        source: /root/parts/sources/src/kcmutils
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kcalendarcore
    kcontacts:
        source: /root/parts/sources/src/kcontacts
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kcmutils
    kdav:
        source: /root/parts/sources/src/kdav
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kcontacts
    kdelibs4support:
        source: /root/parts/sources/src/kdelibs4support
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kdav
    kdesu:
        source: /root/parts/sources/src/kdesu
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kdelibs4support
    # kdewebkit:
    #     source: https://invent.kde.org/frameworks/kdewebkit.git
    #     source-tag: v5.85.0
    #     plugin: cmake
    #     cmake-generator: Ninja
    #     cmake-parameters: 
    #     - -DCMAKE_BUILD_TYPE=Release
    #     - -DCMAKE_INSTALL_PREFIX=/usr
    #     build-environment:
    #     - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
    #     - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
    #     after:
    #     - kdesu
    kholidays:
        source: /root/parts/sources/src/kholidays
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        # - kdewebkit
        - kdesu
    khtml:
        source: /root/parts/sources/src/khtml
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        build-packages:
        - libgif-dev
        stage-packages:
        - libgif7
        after:
        - kholidays
    kimageformats:
        source: /root/parts/sources/src/kimageformats
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - khtml
    kjsembed:
        source: /root/parts/sources/src/kjsembed
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kimageformats
    kmediaplayer:
        source: /root/parts/sources/src/kmediaplayer
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kjsembed
    knotifyconfig:
        source: /root/parts/sources/src/knotifyconfig
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kmediaplayer
    kpeople:
        source: /root/parts/sources/src/kpeople
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - knotifyconfig
    kplotting:
        source: /root/parts/sources/src/kplotting
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kpeople
    kquickcharts:
        source: /root/parts/sources/src/kquickcharts
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kplotting
    krunner:
        source: /root/parts/sources/src/krunner
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kquickcharts
    kxmlrpcclient:
        source: /root/parts/sources/src/kxmlrpcclient
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - krunner
    modemmanager-qt:
        source: /root/parts/sources/src/modemmanager-qt
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        build-packages:
        - modemmanager-dev
        after:
        - kxmlrpcclient
    networkmanager-qt:
        source: /root/parts/sources/src/networkmanager-qt
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        build-packages:
        - libnm-dev 
        after:
        - modemmanager-qt
    prison:
        source: /root/parts/sources/src/prison
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        build-packages:
        - libqrencode-dev
        - libdmtx-dev
        stage-packages:
        - libdmtx0b
        - libqrencode4
        after:
        - networkmanager-qt
    purpose:
        source: /root/parts/sources/src/purpose
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - prison
    qqc2-desktop-style:
        source: /root/parts/sources/src/qqc2-desktop-style
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - purpose
    kdecoration:
        source: /root/parts/sources/src/kdecoration
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - qqc2-desktop-style
    breeze:
        source: /root/parts/sources/src/breeze
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        after:
        - kdecoration

    plasma-integration:
        cmake-parameters:
        # - "-DKDE_INSTALL_USE_QT_SYS_PATHS=ON"
        - -DCMAKE_INSTALL_PREFIX=/usr
        - -DCMAKE_BUILD_TYPE=Release
        - -DENABLE_TESTING=OFF
        - -DBUILD_TESTING=OFF
        - -DKDE_SKIP_TEST_SETTINGS=ON
        source: /root/parts/sources/src/plasma-integration
        source-type: local
        # source-branch: Plasma/5.20
        plugin: cmake
        # build-attributes:
        # - enable-patchelf
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        - CMAKE_PREFIX_PATH: $CMAKE_PREFIX_PATH:$SNAPCRAFT_STAGE
        - CMAKE_INCLUDE_PATH: $CMAKE_INCLUDE_PATH:$SNAPCRAFT_STAGE/include:$SNAPCRAFT_STAGE/usr/include
        - CMAKE_LIBRARY_PATH: $CMAKE_LIBRARY_PATH:$SNAPCRAFT_STAGE/lib:$SNAPCRAFT_STAGE/usr/lib:$SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET
        stage-packages: []
        filesets:
            exclusion:
            - "-usr/lib/*/cmake/*"
            - "-usr/lib/*/qt5/bin/moc"
            - "-usr/lib/*/qt5/bin/qmake"
            - "-usr/lib/*/qt5/bin/rcc"
            - "-usr/lib/*/qt5/bin/*cpp*"
            - "-usr/lib/qt5/bin/assistant"
            - "-usr/lib/qt5/bin/designer"
            - "-usr/lib/qt5/bin/lconvert"
            - "-usr/lib/qt5/bin/linguist"
            - "-usr/lib/qt5/bin/lupdate"
            - "-usr/lib/qt5/bin/lrelease"
            - "-usr/lib/qt5/bin/moc"
            - "-usr/lib/qt5/bin/pixeltool"
            - "-usr/lib/qt5/bin/qcollectiongenerator"
            - "-usr/lib/qt5/bin/qdbuscpp2xml"
            - "-usr/lib/qt5/bin/qdbusxml2cpp"
            - "-usr/lib/qt5/bin/qdoc"
            - "-usr/lib/qt5/bin/qhelpconverter"
            - "-usr/lib/qt5/bin/qlalr"
            - "-usr/lib/qt5/bin/qmake"
            - "-usr/lib/qt5/bin/rcc"
            - "-usr/lib/qt5/bin/syncqt.pl"
            - "-usr/lib/vlc/plugins/gui/libqt4_plugin.so"
            - "-usr/include/*"
            - "-usr/share/ECM/*"
            - "-usr/share/xml/docbook/*"
            - "-usr/share/doc/*"
            - "-usr/share/locale/*/LC_MESSAGES/vlc.mo"
            - "-usr/share/man/*"
            - "-usr/share/icons/breeze/*.rcc"
            - "-usr/share/icons/breeze-dark/*.rcc"
            - "-usr/share/wallpapers/*"
            - "-usr/share/fonts/*"
            - "-usr/share/pkgconfig"
            - "-usr/lib/*/pkgconfig"
            - "-usr/share/QtCurve"
            - "-usr/share/kde4"
            - "-usr/share/bug"
            - "-usr/share/debhelper"
            - "-usr/share/lintian"
            - "-usr/share/menu"
            - "-usr/bin/*vlc"
            - "-usr/bin/dh_*"
            - "-usr/lib/*/*.a"
            - "-usr/lib/*/*.pri"
            - "-usr/share/kf5/kdoctools/*"
            - "-usr/bin/make"
        prime:
        - "$exclusion"
        stage:
        - "-usr/share/doc/*"
        - "-usr/share/man/*"
        - "-usr/share/icons/breeze/*.rcc"
        - "-usr/share/wallpapers/*"
        - "-usr/share/fonts/*"
        after:
        - breeze

    libkdegames:
        source: /root/parts/sources/src/libkdegames
        source-type: local
        plugin: cmake
        cmake-generator: Ninja
        cmake-parameters: 
        - -DCMAKE_BUILD_TYPE=Release
        - -DCMAKE_INSTALL_PREFIX=/usr
        build-environment:
        - LD_LIBRARY_PATH: $SNAPCRAFT_STAGE/usr/lib/$SNAPCRAFT_ARCH_TRIPLET:$LD_LIBRARY_PATH
        - PATH: $SNAPCRAFT_STAGE/usr/bin:$PATH
        build-packages:
          - libsndfile1-dev
        stage-packages:
          - libsndfile1
        after:
        - plasma-integration

    # Launchpad builders timeout internet access so fetching sources in advance
    sources:
        plugin: nil
        override-pull: |
            # Qt Sources
            git clone --recurse-submodules -b v5.15.2 git://code.qt.io/qt/qtxmlpaterns.git
            git clone --recurse-submodules -b v5.15.2 git://code.qt.io/qt/qtwebengine.git
            git clone -b v5.15.2 --depth=1 git://code.qt.io/qt/qtwebsockets.git
            git clone -b v5.15.2 --depth=1 git://code.qt.io/qt/qtwebglplugin.git
            git clone -b v5.15.2 --depth=1 git://code.qt.io/qt/qtx11extras.git
            # KDE/KF5 Sources
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/extra-cmake-modules.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kcoreaddons.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/ki18n.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/karchive.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kconfig.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kdoctools.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kwidgetsaddons.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kcodecs.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kwindowsystem.git
            git clone -b v0.114.0 --depth=1 https://invent.kde.org/libraries/polkit-qt-1.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kauth.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kcrash.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kdbusaddons.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kguiaddons.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kconfigwidgets.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kitemviews.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kiconthemes.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kcompletion.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kservice.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/sonnet.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/attica.git
            git clone -b v4.11.1 --depth=1 https://invent.kde.org/libraries/phonon.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/breeze-icons.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kglobalaccel.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/ktextwidgets.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/knotifications.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kxmlgui.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kbookmarks.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kjobwidgets.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kwallet.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/solid.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kio.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kparts.git
            git clone -b v1.12 --depth=1 https://github.com/taglib/taglib.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kirigami.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kpackage.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kinit.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kactivities.git
            git clone -b v1.3.0 --depth=1 https://invent.kde.org/libraries/plasma-wayland-protocols.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kdeclarative.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kidletime.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kunitconversion.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/oxygen-icons5.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/syntax-highlighting.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kdnssd.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kitemmodels.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kross.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kjs.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/ktexteditor.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kwayland.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/syndication.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/threadweaver.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kded.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kdesignerplugin.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kemoticons.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kfilemetadata.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/knewstuff.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kpty.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/plasma-framework.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/baloo.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/bluez-qt.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/frameworkintegration.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kactivities-stats.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kapidox.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kcalendarcore.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kcmutils.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kcontacts.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kdav.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kdelibs4support.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kdesu.git
            # git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kdewebkit.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kholidays.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/khtml.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kimageformats.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kjsembed.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kmediaplayer.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/knotifyconfig.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kpeople.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kplotting.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kquickcharts.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/krunner.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/kxmlrpcclient.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/modemmanager-qt.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/networkmanager-qt.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/prison.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/purpose.git
            git clone -b v$SNAPCRAFT_PROJECT_VERSION --depth=1 https://invent.kde.org/frameworks/qqc2-desktop-style.git
            git clone -b v5.22.5 --depth=1 https://invent.kde.org/plasma/kdecoration.git
            git clone -b v5.22.5 --depth=1 https://invent.kde.org/plasma/breeze.git
            git clone -b v5.22.5 --depth=1 https://invent.kde.org/plasma/plasma-integration.git
            git clone -b v21.08.1 --depth=1 https://invent.kde.org/games/libkdegames.git
        # override-stage: |
        #     rm -rf $SNAPCRAFT_PART_BUILD
        #     rm -rf $SNAPCRAFT_PART_BUILD/.git
        build-packages:
        - docbook-xml
        - docbook-xsl
        - libxcb-res0-dev
        - libboost-dev
        - xattr
        - libattr1-dev
        - libgif-dev
        - libhunspell-1.7-0
        - libpolkit-gobject-1-dev
        - libpolkit-agent-1-dev
        - modemmanager-dev
        - libnm-dev
        - liblmdb-dev
        - python3-setuptools
        - libical-dev
        - libqrencode-dev
        - libdmtx-dev
        - libsndfile1-dev
        stage-packages:
        - libxcb-res0
        - libpolkit-agent-1-0
        - libpolkit-gobject-1-0
        - libhunspell-1.7-0
        - libpulse-mainloop-glib0
        - libaom0
        - libavcodec58
        - libavformat58
        - libavutil56
        - libbluray2
        - libchromaprint1
        - libcodec2-0.9
        - libgme0
        - libgomp1
        - libgsm1
        - libmp3lame0
        - libmpg123-0
        - libnuma1
        - libopenjp2-7
        - libopenmpt0
        - libshine3
        - libsoxr0
        - libspeex1
        - libssh-gcrypt-4
        - libswresample3
        - libtheora0
        - libtwolame0
        - libva-drm2
        - libva-x11-2
        - libva2
        - libvdpau1
        - libvorbisfile3
        - libwavpack1
        - libx264-155
        - libx265-179
        - libxvidcore4
        - libzvbi0
        - ocl-icd-libopencl1
        - libopengl0
        - libical3
        - libgif7
        - libdmtx0b
        - libqrencode4
        - libsndfile1
